(this["webpackJsonpchat-socket-io"]=this["webpackJsonpchat-socket-io"]||[]).push([[0],{105:function(e,t,n){},149:function(e,t){},157:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(0),o=n.n(r),s=n(8),c=n.n(s),i=(n(105),n(14)),l=n(54),u=n.n(l),d=n(82),m=n(11),j=n(41),p=n.n(j),b=n(85),x=n.n(b)()("https://shrouded-journey-95175.herokuapp.com/"),h=n(13),O=function(e,t){switch(t.type){case"IS_AUTH":return Object(i.a)(Object(i.a)({},e),{},{isAuth:!0,userName:t.payload.name,roomId:t.payload.roomId});case"SET_USERS":return Object(i.a)(Object(i.a)({},e),{},{users:t.payload});case"SET_DATA":return Object(i.a)(Object(i.a)({},e),{},{users:t.payload.users,messages:t.payload.messages});case"SET_MESSAGES":return Object(i.a)(Object(i.a)({},e),{},{messages:[].concat(Object(h.a)(e.messages),[t.payload])});default:return e}},f=n(183),g=n(192),v=n(193),y=n(47),S=n(187),N=Object(f.a)((function(e){return{container:{display:"flex",width:"300px",marginTop:"50px",flexDirection:"column",alignItems:"center",padding:"20px",border:"1px solid grey",borderRadius:"3px"},textField:{width:"100%",marginBottom:"20px"},rules:{marginBottom:"15px"}}})),w=function(e){var t=e.login,n=N(),o=Object(r.useState)(""),s=Object(m.a)(o,2),c=s[0],i=s[1],l=Object(r.useState)(""),u=Object(m.a)(l,2),d=u[0],j=u[1],b=Object(r.useState)(!1),x=Object(m.a)(b,2),h=x[0],O=x[1];return Object(a.jsxs)(v.a,{component:"form",className:n.container,children:[h&&Object(a.jsx)(y.a,{style:{color:"tomato",marginBottom:"15px"},variant:"body2",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u0430 \u043f\u043e\u043b\u044f \u0432\u0432\u043e\u0434\u0430"}),Object(a.jsx)(g.a,{onChange:function(e){return i(e.target.value)},className:n.textField,variant:"outlined",label:"Room",value:c}),Object(a.jsx)(g.a,{onChange:function(e){return j(e.target.value)},className:n.textField,variant:"outlined",label:"Name",value:d}),Object(a.jsx)(S.a,{onClick:function(){if(!c||!d)return O(!0);p.a.post("https://shrouded-journey-95175.herokuapp.com/rooms",{name:d,roomId:c}).then((function(e){i(""),j(""),t({name:d,roomId:c})})),O(!1)},style:{width:"100px",marginBottom:"50px"},variant:"outlined",color:"secondary",fullWidth:!1,children:" Join"}),Object(a.jsx)(y.a,{variant:"body1",className:n.rules,children:" How to use this chat ? :)"}),Object(a.jsx)(y.a,{variant:"body1",className:n.rules,children:" Step 1: User1 enter username in input's name, and enter number of room in the input's room "}),Object(a.jsx)(y.a,{variant:"body1",className:n.rules,children:" Step 2: User2 also enter username in input's name, and enter the same number of room in the input's room "}),Object(a.jsx)(y.a,{variant:"body1",className:n.rules,children:" Step 3: User1 and User2 can chat "})]})},C=n(191),E=n(186),k=n(188),I=n(189),R=n(194),M=n(190),A=n(87),T=n.n(A),B=Object(f.a)((function(e){return{listItem:{backgroundColor:"white",borderRadius:"5px",marginBottom:"10px",cursor:"pointer","&:last-Child":{marginBottom:"0px"}}}})),_=function(e){var t=e.name,n=B();return Object(a.jsxs)(k.a,{className:n.listItem,children:[Object(a.jsx)(I.a,{children:Object(a.jsx)(R.a,{children:Object(a.jsx)(T.a,{})})}),Object(a.jsx)(M.a,{primary:t})]})},D=Object(f.a)((function(e){return{letterBox:{display:"flex",justifyContent:"flex-end",marginBottom:"30px"},letter:{padding:"5px 10px",backgroundColor:"#66b3ff",color:"white",borderRadius:"12px",position:"relative",wordBreak:"break-word",marginRight:"20px"},nameLetter:{position:"absolute",backgroundColor:"#944dff",right:"-10px",bottom:"-15px",borderRadius:"8px",padding:"2px 5px",fontSize:"10px"}}})),U=function(e){var t=e.text,n=e.name,r=D();return Object(a.jsx)(v.a,{component:"div",className:r.letterBox,children:Object(a.jsxs)(y.a,{className:r.letter,children:[t,Object(a.jsx)(v.a,{component:"span",className:r.nameLetter,children:n})]})})},H=Object(f.a)((function(e){return{form:{display:"flex",flexDirection:"column"},button:{backgroundColor:"#33ccff",margin:"20px 10px 0px 0px",padding:"5px 10px",color:"white","&:hover":{backgroundColor:"#33ccff"}}}})),J=function(e){var t=e.addMessage,n=H(),o=Object(r.useState)(""),s=Object(m.a)(o,2),c=s[0],i=s[1];return Object(a.jsxs)(v.a,{component:"form",className:n.form,children:[Object(a.jsx)(g.a,{value:c,onChange:function(e){return i(e.target.value)},placeholder:"Enter Messagee",rows:4,multiline:!0,variant:"outlined"}),Object(a.jsx)(v.a,{component:"div",className:n.buttonContainer,children:Object(a.jsx)(S.a,{onClick:function(){t(c),i("")},className:n.button,children:" Send"})})]})},G=Object(f.a)((function(e){return{chatContainer:{display:"flex",width:"800px",flexDirection:"row",alignItems:"center",border:"1px solid grey",borderRadius:"6px",overflow:"hidden"},usersContainer:{backgroundColor:" #f2f2f2",padding:"10px"},messageContainer:{backgroundColor:" white",padding:"10px",minHeight:"500px"},list:{width:"100%"},letterContainer:{maxHeight:"250px",overflow:"auto"},hr:{marginBottom:"20px",border:"1px solid #f2f2f2"}}})),F=function(e){var t=e.users,n=e.messages,o=e.userName,s=e.roomId,c=e.setMessage,i=G(),l=Object(r.useRef)(null);Object(r.useEffect)((function(){l.current.scrollTo(0,99999)}),[n]);return Object(a.jsx)(v.a,{className:i.chatContainer,children:Object(a.jsxs)(C.a,{container:!0,children:[Object(a.jsxs)(C.a,{container:!0,direction:"column",item:!0,md:4,sm:4,xs:12,className:i.usersContainer,children:[Object(a.jsxs)(y.a,{align:"center",variant:"h6",children:[" ROOM \u2116: (",s,")"]}),Object(a.jsxs)(y.a,{variant:"h6",children:[" Online: (",t.length,")"]}),Object(a.jsx)(E.a,{className:i.list,children:t?t.map((function(e,t){return Object(a.jsx)(_,{name:e},t)})):null})]}),Object(a.jsxs)(C.a,{container:!0,direction:"column",justify:"space-between",item:!0,md:8,sm:8,xs:12,className:i.messageContainer,children:[Object(a.jsx)(v.a,{component:"div",className:i.letterContainer,ref:l,children:n?n.map((function(e,t){return Object(a.jsx)(U,{name:e.userName,text:e.message},t)})):null}),Object(a.jsxs)(v.a,{component:"div",className:i.formContainer,children:[Object(a.jsx)("hr",{className:i.hr}),Object(a.jsx)(J,{addMessage:function(e){x.emit("ROOM:SET_MESSAGE",{message:e,userName:o,roomId:s}),c({message:e,userName:o})}})]})]})]})})};var W=function(){var e=Object(r.useReducer)(O,{isAuth:!1,users:[],messages:[],userName:"",roomId:null}),t=Object(m.a)(e,2),n=t[0],o=t[1],s=function(e){o({type:"SET_USERS",payload:e})},c=function(e){o({type:"SET_MESSAGES",payload:e})};Object(r.useEffect)((function(){x.on("ROOM:JOINED",(function(e){return s(e)})),x.on("ROOM:DISCONNECT_USER",(function(e){return s(e)})),x.on("ROOM:ADD_MESSAGE",(function(e){return c(e)}))}),[]);var l=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"IS_AUTH",payload:t}),x.emit("ROOM:JOIN",t),e.next=4,p.a.get("https://shrouded-journey-95175.herokuapp.com/rooms/".concat(t.roomId));case 4:n=e.sent,a=n.data,o({type:"SET_DATA",payload:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",minHeight:"600px"},children:n.isAuth?Object(a.jsx)(F,Object(i.a)(Object(i.a)({},n),{},{setMessage:c})):Object(a.jsx)(w,{login:l})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(W,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[157,1,2]]]);
//# sourceMappingURL=main.42f28fe7.chunk.js.map