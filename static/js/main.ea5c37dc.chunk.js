(this["webpackJsonpfull-stack"]=this["webpackJsonpfull-stack"]||[]).push([[0],{103:function(e,t,a){e.exports=a(157)},108:function(e,t,a){},149:function(e,t){},157:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),i=(a(108),a(55)),s=a.n(i),l=a(84),m=a(21),u=a(41),d=a.n(u),p=a(85),f=a.n(p)()(),g=a(90),x=a(16),E=function(e,t){switch(t.type){case"IS_AUTH":return Object(x.a)(Object(x.a)({},e),{},{isAuth:!0,userName:t.payload.name,roomId:t.payload.roomId});case"SET_USERS":return Object(x.a)(Object(x.a)({},e),{},{users:t.payload});case"SET_DATA":return Object(x.a)(Object(x.a)({},e),{},{users:t.payload.users,messages:t.payload.messages});case"SET_MESSAGES":return Object(x.a)(Object(x.a)({},e),{},{messages:[].concat(Object(g.a)(e.messages),[t.payload])});default:return e}},b=a(183),h=a(192),O=a(193),v=a(48),y=a(187),j=Object(b.a)((function(e){return{container:{display:"flex",width:"300px",flexDirection:"column",alignItems:"center",padding:"20px",border:"1px solid grey",borderRadius:"3px"},textField:{width:"100%",marginBottom:"20px"}}})),S=function(e){var t=e.login,a=j(),o=Object(n.useState)(""),c=Object(m.a)(o,2),i=c[0],s=c[1],l=Object(n.useState)(""),u=Object(m.a)(l,2),p=u[0],f=u[1],g=Object(n.useState)(!1),x=Object(m.a)(g,2),E=x[0],b=x[1];return r.a.createElement(O.a,{component:"form",className:a.container},E&&r.a.createElement(v.a,{style:{color:"tomato",marginBottom:"15px"},variant:"body2"},"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u0430 \u043f\u043e\u043b \u0432\u0432\u043e\u0434\u0430"),r.a.createElement(h.a,{onChange:function(e){return s(e.target.value)},className:a.textField,variant:"outlined",label:"Rooms",value:i}),r.a.createElement(h.a,{onChange:function(e){return f(e.target.value)},className:a.textField,variant:"outlined",label:"Name",value:p}),r.a.createElement(y.a,{onClick:function(){if(!i||!p)return b(!0);d.a.post("/rooms",{name:p,roomId:i}).then((function(e){s(""),f(""),t({name:p,roomId:i})})),b(!1)},style:{width:"100px"},variant:"outlined",color:"secondary",fullWidth:!1}," Join"))},w=a(191),N=a(186),C=a(188),k=a(189),I=a(194),R=a(190),M=a(89),A=a.n(M),T=Object(b.a)((function(e){return{listItem:{backgroundColor:"white",borderRadius:"5px",marginBottom:"10px",cursor:"pointer","&:last-Child":{marginBottom:"0px"}}}})),B=function(e){var t=e.name,a=T();return r.a.createElement(C.a,{className:a.listItem},r.a.createElement(k.a,null,r.a.createElement(I.a,null,r.a.createElement(A.a,null))),r.a.createElement(R.a,{primary:t}))},_=Object(b.a)((function(e){return{letterBox:{display:"flex",justifyContent:"flex-end",marginBottom:"30px"},letter:{padding:"5px 10px",backgroundColor:"#66b3ff",color:"white",borderRadius:"12px",position:"relative",wordBreak:"break-word",marginRight:"20px"},nameLetter:{position:"absolute",backgroundColor:"#944dff",right:"-10px",bottom:"-15px",borderRadius:"8px",padding:"2px 5px",fontSize:"10px"}}})),D=function(e){var t=e.text,a=e.name,n=_();return r.a.createElement(O.a,{component:"div",className:n.letterBox},r.a.createElement(v.a,{className:n.letter},t,r.a.createElement(O.a,{component:"span",className:n.nameLetter},a)))},H=Object(b.a)((function(e){return{form:{display:"flex",flexDirection:"column"},button:{backgroundColor:"#33ccff",margin:"20px 10px 0px 0px",padding:"5px 10px",color:"white","&:hover":{backgroundColor:"#33ccff"}}}})),J=function(e){var t=e.addMessage,a=H(),o=Object(n.useState)(""),c=Object(m.a)(o,2),i=c[0],s=c[1];return r.a.createElement(O.a,{component:"form",className:a.form},r.a.createElement(h.a,{value:i,onChange:function(e){return s(e.target.value)},placeholder:"Enter Messagee",rows:4,multiline:!0,variant:"outlined"}),r.a.createElement(O.a,{component:"div",className:a.buttonContainer},r.a.createElement(y.a,{onClick:function(){t(i),s("")},className:a.button}," Send")))},U=Object(b.a)((function(e){return{chatContainer:{display:"flex",width:"800px",flexDirection:"row",alignItems:"center",border:"1px solid grey",borderRadius:"6px",overflow:"hidden"},usersContainer:{backgroundColor:" #f2f2f2",padding:"10px"},messageContainer:{backgroundColor:" white",padding:"10px",minHeight:"500px"},list:{width:"100%"},letterContainer:{maxHeight:"250px",overflow:"auto"},hr:{marginBottom:"20px",border:"1px solid #f2f2f2"}}})),G=function(e){var t=e.users,a=e.messages,o=e.userName,c=e.roomId,i=e.setMessage,s=U(),l=Object(n.useRef)(null);Object(n.useEffect)((function(){l.current.scrollTo(0,99999)}),[a]);return r.a.createElement(O.a,{className:s.chatContainer},r.a.createElement(w.a,{container:!0},r.a.createElement(w.a,{container:!0,direction:"column",item:!0,md:4,sm:4,xs:12,className:s.usersContainer},r.a.createElement(v.a,{align:"center",variant:"h6"}," ROOM \u2116: (",c,")"),r.a.createElement(v.a,{variant:"h6"}," Online: (",t.length,")"),r.a.createElement(N.a,{className:s.list},t?t.map((function(e){return r.a.createElement(B,{name:e,key:e})})):null)),r.a.createElement(w.a,{container:!0,direction:"column",justify:"space-between",item:!0,md:8,sm:8,xs:12,className:s.messageContainer},r.a.createElement(O.a,{component:"div",className:s.letterContainer,ref:l},a?a.map((function(e,t){return r.a.createElement(D,{name:e.userName,key:t,text:e.message})})):null),r.a.createElement(O.a,{component:"div",className:s.formContainer},r.a.createElement("hr",{className:s.hr}),r.a.createElement(J,{addMessage:function(e){f.emit("ROOM:SET_MESSAGE",{message:e,userName:o,roomId:c}),i({message:e,userName:o})}})))))};var F=function(){var e=Object(n.useReducer)(E,{isAuth:!1,users:[],messages:[],userName:"",roomId:null}),t=Object(m.a)(e,2),a=t[0],o=t[1],c=function(e){o({type:"SET_USERS",payload:e})},i=function(e){o({type:"SET_MESSAGES",payload:e})};Object(n.useEffect)((function(){f.on("ROOM:JOINED",(function(e){return c(e)})),f.on("ROOM:DISCONNECT_USER",(function(e){return c(e)})),f.on("ROOM:ADD_MESSAGE",(function(e){return i(e)}))}),[]);var u=function(){var e=Object(l.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"IS_AUTH",payload:t}),f.emit("ROOM:JOIN",t),e.next=4,d.a.get("rooms/".concat(t.roomId));case 4:a=e.sent,n=a.data,o({type:"SET_DATA",payload:n});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",minHeight:"600px"}},a.isAuth?r.a.createElement(G,Object.assign({},a,{setMessage:i})):r.a.createElement(S,{login:u}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[103,1,2]]]);
//# sourceMappingURL=main.ea5c37dc.chunk.js.map